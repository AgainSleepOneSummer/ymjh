# script_arknight
<p align="left">
	<img src="https://github.com/vertuer/script_arknight/blob/master/processed/f9c6cbdc6b.jpg" width="250" height="250">
</p>

## 1.简介
  [EXE文件网盘链接3-21](https://pan.baidu.com/s/1VomFQYtFq_UYcDYxRlEKdA)  
  提取码：9lcg   
  自己写的针对PC端的游戏脚本，现在能自动接取并完成悬赏及一些蛋疼操作，使用请注册github打个star，可以使用源码二次开发，源码使用请fork，欢迎留言交流。  
  [明日方舟脚本](https://github.com/vertuer/script_arknight)  
  有疑问及建议可以加QQ2434995342,有空回答相关疑问

明日方舟调用库：  
PIL，pywin32-223，opencv-3.4.3  



## 2.基本原理说明：
  利用抓取windows窗口图像，并对图像进行基本识别操作后对模拟器窗口发送虚拟操作指令，由于是在模拟器之外的，因此原理上不会有风险。
缺点是模拟器无法最小化，因windows程序最小化停止重绘窗口，无法抓取到窗体图像。推荐spy++这个工具，可以获取模拟器的句柄和窗体信息，[spy++下载地址](http://pan.baidu.com/s/1skMJUkH)  
  ocr识别思路：阈值分析，连通域分割，hog特征处理，svm分类。

## 3.脚本功能（针对2020-3-21版本）
  1. 自动接取悬赏，可以指定悬赏类型及悬赏箱子个数    
  2. 自动完成悬赏，自动组队并完成悬赏，关卡结束自动召回队友，战斗中自动释放绝学，遇到特殊情况（如队友掉线等）自动退队重组
  3. 自动绝学挂机
  4. 自动抢摆摊
  5. 自动抢集市
  6. 自动抢红包
  7. 自动采集  
  8. 脚本开始位置有要求，详情见下  
  9. 分辨率并不能自适应，一梦江湖图标一堆半透明加文字的，目前只测试了1340x779的分辨率，即桌面分辨率为1080p下打开的默认分辨率 
  10. 暂时只支持PC客户端  
  11. 增加悬赏每个关卡的队伍人数和奶妈数量选择
## 4.挂机界面使用说明  
  简易界面如下  
<p align="left">
	<img src="https://github.com/vertuer/ymjh/blob/master/123.png" width="200" height="300">
</p>

  1. 仅接悬赏：请在悬赏界面使用，开始后可以点击右侧“停止”按钮中断。该功能为接三个悬赏，悬赏盒子数量和类型自行设定。  
  2. 自动悬赏：请在主界面使用，使用前自己创建好队伍（对人数没有要求，之后会组），队伍目标选择江湖纪事中的任意一个（如咸鱼港新秀等），之后点击开始
  3. 抢红包：请打开聊天界面，保证左侧第三频道为世界，并且注意保证信息滚动。除了绝学挂机应该不能与其它功能共同使用  
  4. 绝学挂机：请切到端游模式（手游模式非战斗状态脚本无法使用），然后1-8对应8个技能，根据自身职业选择放对应技能（防止挂机过久位移到河里），初始设定是沧海职业的（我玩的沧海），绝学挂机推荐和抢红包一起使用  
  5. 抢集市：在集市界面的“购买”子菜单下使用，根据情况选择刷新速度  
  6. 抢摆摊：进入摆摊gui，应该比较明了，是否多个购买功能是一次性买9个，不勾选速度会快一点点  
  7. 因为主要是自己使用，有使用问题请加企鹅      
  8. 开启脚本时要用管理员模式，分辨率一定要为1340x779，微小偏差没有问题。
  
## 5.摆摊界面使用说明  
  简易界面如下
<p align="left">
	<img src="https://github.com/vertuer/ymjh/blob/master/456.png" width="200" height="300">
</p>

## 注意事项  
  1. 多个购买功能开启可能会一次性购买多于设定数目的物品，使用需谨慎（我是用来抢秘籍）  
## 简易流程  
  1. 自己看看，实在弄不懂加我企鹅  
## 6.后续增加功能：
  1. 我自己是够用了  
## 7.更新内容
### （2020-3-3）
  1. 添加自动采集功能  
  2. 修复刷本自动绝学只对沧海有效的bug  
  3. 添加了刷新悬赏的自定义间隔设定，若接错悬赏请放缓刷新间隔（往左拉），若对自己的网络和电脑有自信可以拉到最右  
### （2020-3-17）
  1. 加入了明月山庄  
  2. 修复了明月山庄选择无效的bug  
  3. 提高了悬赏每次的判断速度，之前那个速度条的参数我没传进去，从大概0.26s提高到了0.1s还可以拉快  
### （2020-3-21）
  1. 修复明月山庄各种情况出现的bug  
  2. 加入了奶妈数量检测功能及死亡退出重组功能（还未测试），明月挂机奶我真的无语了  
  3. 加了个登剑阁挂机，但是我登剑阁有bug，容易卡队友处于副本中  

